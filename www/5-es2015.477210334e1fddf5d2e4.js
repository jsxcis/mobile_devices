(window.webpackJsonp=window.webpackJsonp||[]).push([[5,123,124],{"2g2N":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var i=s("mrSG"),r=s("8Y7J"),o=s("sZkV");let n=(()=>{class e{constructor(e){this.toastController=e}presentToast(e){return i.a(this,void 0,void 0,(function*(){(yield this.toastController.create({message:e,duration:2e3})).present()}))}}return e.ngInjectableDef=r.Kb({factory:function(){return new e(r.Lb(o.Ib))},token:e,providedIn:"root"}),e})()},hKcI:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var i=s("N+K7"),r=s("8Y7J"),o=s("iInd");let n=(()=>{class e{constructor(e,t){this.httpService=e,this.router=t}retrieveWeatherStns(e){return this.httpService.post("xcisweatherstnrest",e)}saveFlowMeterSettings(e){return this.httpService.post("xcisflowmeterrest",e)}retrieveFlowMeters(e){return this.httpService.post("xcisflowmeterrest",e)}retrieveFlowMeterDetail(e){return this.httpService.post("xcisflowmeterdetailrest",e)}retrieveFlowMeterDailyHistory(e){return this.httpService.post("xcisflowmeterdailyhistoryrest",e)}saveRainGaugeSettings(e){return this.httpService.post("xcisraingaugerest",e)}retrieveRainGauges(e){return this.httpService.post("xcisraingaugerest",e)}retrieveRainGaugeDetail(e){return this.httpService.post("xcisraingaugedetailrest",e)}retrieveRainGaugeDailyHistory(e){return this.httpService.post("xcisraingaugedailyhistoryrest",e)}retrieveFenceDetail(e){return this.httpService.post("xcisfencedetailrest",e)}retrieveFenceDailyHistory(e){return this.httpService.post("xcisfencedailyhistoryrest",e)}saveFenceSettings(e){return this.httpService.post("xcisfencerest",e)}retrieveFences(e){return this.httpService.post("xcisfencerest",e)}retrieveTroughDetail(e){return this.httpService.post("xcistroughdetailrest",e)}retrieveTroughDailyHistory(e){return this.httpService.post("xcistroughdailyhistoryrest",e)}retrieveTroughs(e){return this.httpService.post("xcistroughrest",e)}saveTroughSettings(e){return this.httpService.post("xcistroughrest",e)}retrieveTankDetail(e){return this.httpService.post("xcistankdetailrest",e)}retrieveTankDailyHistory(e){return this.httpService.post("xcistankdailyhistoryrest",e)}retrieveTanks(e){return this.httpService.post("xcistankrest",e)}saveTankSettings(e){return this.httpService.post("xcistankrest",e)}retrieveBores(e){return this.httpService.post("xcisborerest",e)}startBore(e){return this.httpService.post("xcisboreonrest",e)}stopBore(e){return this.httpService.post("xcisboreoffrest",e)}saveBoreSettings(e){return this.httpService.post("xcisborerest",e)}retrieveDevice(e){return this.httpService.post("xcisdevicerest",e)}}return e.ngInjectableDef=r.Kb({factory:function(){return new e(r.Lb(i.a),r.Lb(o.m))},token:e,providedIn:"root"}),e})()},j1ZV:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{}},lz9Z:function(e,t,s){"use strict";s.r(t);var i=s("8Y7J");class r{}var o=s("pMnS"),n=s("MKJQ"),a=s("sZkV"),l=s("gcOT"),c=s("hKcI"),h=s("2g2N");const{Network:p}=l.a;class u{constructor(e,t,s,i,r){this.xcisService=e,this.toastService=t,this.renderer=s,this.element=i,this._document=r,this.markers=[],this.mapsLoaded=!1,this.networkHandler=null,this.postData={userID:"jsharp",req:"all",deviceID:"all"},this.postDeviceData={deviceID:"NOTSET",req:"one"},this.labelColor="white"}ngOnInit(){this.init().then(e=>{console.log("Google Maps ready.")},e=>{console.log(e)})}ionViewWillEnter(){console.log("ionViewWillEnter")}init(){return new Promise((e,t)=>{this.loadSDK().then(s=>{this.initMap().then(t=>{e(!0)},e=>{t(e)})},e=>{t(e)})})}loadSDK(){return console.log("Loading Google Maps SDK"),new Promise((e,t)=>{this.mapsLoaded?t("SDK already loaded"):p.getStatus().then(s=>{s.connected?this.injectSDK().then(t=>{e(!0)},e=>{t(e)}):(null==this.networkHandler&&(this.networkHandler=p.addListener("networkStatusChange",e=>{e.connected&&(this.networkHandler.remove(),this.init().then(e=>{console.log("Google Maps ready.")},e=>{console.log(e)}))})),t("Not online"))},s=>{navigator.onLine?this.injectSDK().then(t=>{e(!0)},e=>{t(e)}):t("Not online")})})}injectSDK(){return new Promise((e,t)=>{window.mapInit=()=>{this.mapsLoaded=!0,e(!0)};let s=this.renderer.createElement("script");s.id="googleMaps",s.src=this.apiKey?"https://maps.googleapis.com/maps/api/js?key="+this.apiKey+"&callback=mapInit":"https://maps.googleapis.com/maps/api/js?callback=mapInit",this.renderer.appendChild(this._document.body,s)})}initMap(){return new Promise((e,t)=>{console.log("map init");let s={center:new google.maps.LatLng(-33.805702,148.777022),zoom:15,mapTypeId:google.maps.MapTypeId.HYBRID};this.map=new google.maps.Map(document.getElementById("map_canvas"),s),this.map.addListener("maptypeid_changed",(function(){console.log("Map type changed")})),this.loadFenceMarkers(),this.loadTroughMarkers(),this.loadTankMarkers(),this.loadBoreMarkers(),this.loadWeatherMarkers(),e(!0)})}addMarker(e,t,s,i,r){let o=new google.maps.LatLng(t,s);var n=new google.maps.InfoWindow({content:e}),a={url:r,size:new google.maps.Size(60,60),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,20)};let l=new google.maps.Marker({title:i,label:{text:i,color:this.labelColor},map:this.map,animation:google.maps.Animation.DROP,position:o,icon:a,shape:{coords:[1,1,1,20,18,20,18,1],type:"poly"},draggable:!1});l.addListener("click",(function(){n.open(this.map,l)})),this.markers.push(l)}loadDevice(e){console.log("Loading Device...."),this.postDeviceData.deviceID=e,console.log(this.postDeviceData.deviceID),this.xcisService.retrieveDevice(this.postDeviceData).subscribe(e=>{for(var t in this.device=e.deviceData,this.device)console.log(this.device[t].deviceName),console.log(this.device[t].deviceMode),console.log(this.device[t].deviceLAT),console.log(this.device[t].deviceLONG)},e=>{console.log("Network connection error retrieving weatherStns"),console.log(e),this.toastService.presentToast("Network connection error retrieving weatherStns")})}loadWeatherMarkers(){console.log("Loading Weather Markers...."),this.xcisService.retrieveWeatherStns(this.postData).subscribe(e=>{for(var t in this.weatherStns=e.weatherStnData,this.weatherStns){console.log(this.weatherStns[t].deviceName),console.log(this.weatherStns[t].deviceMode),console.log(this.weatherStns[t].deviceLAT),console.log(this.weatherStns[t].deviceLONG);var s=this.weatherStns[t].deviceName;this.addMarker('<div id ="content"><p><b>'+s+"</b></p><p>Temp: "+this.weatherStns[t].temperature+"&#x2103;</p><p>Humidity: "+this.weatherStns[t].humidity+"%</p><p>Pressure: "+this.weatherStns[t].pressure+"mb</p><p>Wind Speed: "+this.weatherStns[t].windSpeed+"kts</p><p>Wind Direction: "+this.weatherStns[t].direction+"</p><p>Rain Total: "+this.weatherStns[t].rainTotalMM+"mm</p><p>Rain/Hour: "+this.weatherStns[t].rainMMPerHour+"mm</p><p>Status Date: "+this.weatherStns[t].deviceStatusDate+"</p></div>",this.weatherStns[t].deviceLAT,this.weatherStns[t].deviceLONG,s+" Weather Stn","assets/icon/weatherstnicon_marker.png")}},e=>{console.log("Network connection error retrieving weatherStns"),console.log(e),this.toastService.presentToast("Network connection error retrieving weatherStns")})}loadBoreMarkers(){console.log("Loading Bore Markers...."),this.xcisService.retrieveBores(this.postData).subscribe(e=>{for(var t in this.bores=e.boreData,this.bores){console.log(this.bores[t].deviceName),console.log(this.bores[t].deviceMode),console.log(this.bores[t].deviceLAT),console.log(this.bores[t].deviceLONG);var s=this.bores[t].deviceName;this.addMarker('<div id ="content"><p><b>'+s+"</b></p><p>Mode: "+this.bores[t].deviceMode+"</p><p>Status: "+this.bores[t].boreStatus+"</p><p>State: "+this.bores[t].boreState+"</p><p>Current: "+this.bores[t].boreCurrent+"A</p><p>Flow Rate: "+this.bores[t].boreFlowRate+"L/min</p><p>Status Date: "+this.bores[t].deviceStatusDate+"</p></div>",this.bores[t].deviceLAT,this.bores[t].deviceLONG,s+" Bore","assets/icon/boreicon_marker.png")}},e=>{console.log("Network connection error retrieving bores"),console.log(e),this.toastService.presentToast("Network connection error retrieving bores")})}loadTankMarkers(){console.log("Loading Tank Markers...."),this.xcisService.retrieveTanks(this.postData).subscribe(e=>{for(var t in this.tanks=e.tankData,this.tanks){console.log(this.tanks[t].deviceName),console.log(this.tanks[t].deviceMode),console.log(this.tanks[t].deviceLAT),console.log(this.tanks[t].deviceLONG);var s=this.tanks[t].deviceName;this.addMarker('<div id ="content"><p><b>'+s+"</b></p><p>Mode: "+this.tanks[t].deviceMode+"</p><p>Level: "+this.tanks[t].deviceLevel+"%</p><p>Available Depth: "+this.tanks[t].availDepth+"M</p><p>Available Volume: "+this.tanks[t].availVolume+"L</p><p>Reserve Depth: "+this.tanks[t].reserveDepth+"M</p><p>Reserve Volume: "+this.tanks[t].reserveVolume+"L</p><p>Total Depth: "+this.tanks[t].totalDepth+"M</p><p>Total Volume: "+this.tanks[t].totalVolume+"L</p><p>Status Date: "+this.tanks[t].deviceStatusDate+"</p></div>",this.tanks[t].deviceLAT,this.tanks[t].deviceLONG,s+"Tank","assets/icon/watertankicon_marker.jpg")}},e=>{console.log("Network connection error retrieving tanks"),console.log(e),this.toastService.presentToast("Network connection error retrieving tanks")})}loadTroughMarkers(){console.log("Loading Trough Markers...."),this.xcisService.retrieveTroughs(this.postData).subscribe(e=>{for(var t in this.troughs=e.troughData,this.fences){console.log(this.troughs[t].deviceName),console.log(this.troughs[t].deviceMode),console.log(this.troughs[t].deviceLAT),console.log(this.troughs[t].deviceLONG);var s=this.troughs[t].deviceName;this.addMarker('<div id ="content"><p><b>'+s+"</b></p><p>Mode: "+this.troughs[t].deviceMode+"</p><p>Level: "+this.troughs[t].deviceLevel+"%</p><p>Available Depth: "+this.troughs[t].availDepth+"mm</p><p>Total Depth: "+this.troughs[t].totalDepth+"mm</p><p>Trough Status: "+this.troughs[t].troughStatus+"</p><p>Status Date: "+this.troughs[t].deviceStatusDate+"</p></div>",this.troughs[t].deviceLAT,this.troughs[t].deviceLONG,s+"Trough","assets/icon/troughicon_marker.png")}},e=>{console.log("Network connection error retrieving tanks"),console.log(e),this.toastService.presentToast("Network connection error retrieving troughs")})}loadFenceMarkers(){console.log("Loading Fence Markers...."),this.xcisService.retrieveFences(this.postData).subscribe(e=>{for(var t in this.fences=e.fenceData,this.fences){console.log(this.fences[t].deviceName),console.log(this.fences[t].deviceMode),console.log(this.fences[t].deviceLAT),console.log(this.fences[t].deviceLONG);var s=this.fences[t].deviceName;this.addMarker('<div id ="content"><p><b>'+s+"</b></p><p>Mode: "+this.fences[t].deviceMode+"</p><p>Voltage: "+this.fences[t].fenceVoltage+"KV</p><p>Status: "+this.fences[t].fenceStatus+"</p><p>Status Date: "+this.fences[t].deviceStatusDate+"</p></div>",this.fences[t].deviceLAT,this.fences[t].deviceLONG,s+"E-Fence","assets/icon/electricfenceicon_marker.png")}},e=>{console.log("Network connection error retrieving tanks"),console.log(e),this.toastService.presentToast("Network connection error retrieving tanks")})}}var d=s("SVse"),v=i.nb({encapsulation:0,styles:[["app-google-maps[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"]],data:{}});function g(e){return i.Gb(0,[(e()(),i.pb(0,0,null,null,2,"ion-content",[],null,null,null,n.D,n.e)),i.ob(1,49152,null,0,a.r,[i.h,i.k,i.x],null,null),(e()(),i.pb(2,0,null,0,0,"div",[["id","map_canvas"],["style","height:100%; width:1000px; border:2px solid black;"]],null,null,null,null,null))],null,null)}var b=s("lGQG");class k{constructor(e,t,s,i,r,o,n){this.platform=e,this.router=t,this.authService=s,this.xcisService=i,this.toastService=r,this.http=o,this.navCtrl=n,this.postData={userID:"jsharp",req:"all"}}ngOnInit(){this.authService.userData$.subscribe(e=>{this.displayUserData=e})}testMarker(){let e=this.mapComponent.map.getCenter();this.mapComponent.addMarker(void 0,e.lat(),e.lng(),"test","http://maps.google.com/mapfiles/ms/icons/blue-dot.png")}}var m=s("iInd"),S=s("IheW"),w=i.nb({encapsulation:0,styles:[[""]],data:{}});function D(e){return i.Gb(0,[i.Db(402653184,1,{mapComponent:0}),(e()(),i.pb(1,0,null,null,6,"ion-header",[],null,null,null,n.G,n.h)),i.ob(2,49152,null,0,a.y,[i.h,i.k,i.x],null,null),(e()(),i.pb(3,0,null,0,4,"ion-toolbar",[["color","primary"]],null,null,null,n.X,n.y)),i.ob(4,49152,null,0,a.wb,[i.h,i.k,i.x],{color:[0,"color"]},null),(e()(),i.pb(5,0,null,0,2,"ion-title",[],null,null,null,n.W,n.x)),i.ob(6,49152,null,0,a.ub,[i.h,i.k,i.x],null,null),(e()(),i.Fb(-1,0,[" Google Map "])),(e()(),i.pb(8,0,null,null,3,"ion-content",[],null,null,null,n.D,n.e)),i.ob(9,49152,null,0,a.r,[i.h,i.k,i.x],null,null),(e()(),i.pb(10,0,null,0,1,"app-google-maps",[["apiKey","AIzaSyBUoE0tE4u8zzxgsO3qkJ9cEeWIqjDgNbA"]],null,null,null,g,v)),i.ob(11,114688,[[1,4]],0,u,[c.a,h.a,i.B,i.k,d.c],{apiKey:[0,"apiKey"]},null),(e()(),i.pb(12,0,null,null,3,"ion-footer",[],null,null,null,n.E,n.f)),i.ob(13,49152,null,0,a.w,[i.h,i.k,i.x],null,null),(e()(),i.pb(14,0,null,0,1,"button",[["color","light"],["full",""],["ion-button",""]],null,[[null,"click"]],(function(e,t,s){var i=!0;return"click"===t&&(i=!1!==e.component.testMarker()&&i),i}),null,null)),(e()(),i.Fb(-1,null,["Test Marker"]))],(function(e,t){e(t,4,0,"primary"),e(t,11,0,"AIzaSyBUoE0tE4u8zzxgsO3qkJ9cEeWIqjDgNbA")}),null)}function M(e){return i.Gb(0,[(e()(),i.pb(0,0,null,null,1,"app-map",[],null,null,null,D,w)),i.ob(1,114688,null,0,k,[a.Eb,m.m,b.a,c.a,h.a,S.c,a.Cb],null,null)],(function(e,t){e(t,1,0)}),null)}var f=i.lb("app-map",k,M,{},{},[]),y=s("s7LF");class L{}var T=s("j1ZV");s.d(t,"MapPageModuleNgFactory",(function(){return x}));var x=i.mb(r,[],(function(e){return i.yb([i.zb(512,i.j,i.X,[[8,[o.a,f]],[3,i.j],i.v]),i.zb(4608,d.k,d.j,[i.s,[2,d.r]]),i.zb(4608,y.j,y.j,[]),i.zb(4608,a.a,a.a,[i.x,i.g]),i.zb(4608,a.Bb,a.Bb,[a.a,i.j,i.p]),i.zb(4608,a.Fb,a.Fb,[a.a,i.j,i.p]),i.zb(1073742336,d.b,d.b,[]),i.zb(1073742336,y.i,y.i,[]),i.zb(1073742336,y.b,y.b,[]),i.zb(1073742336,a.yb,a.yb,[]),i.zb(1073742336,m.p,m.p,[[2,m.u],[2,m.m]]),i.zb(1073742336,L,L,[]),i.zb(1073742336,T.a,T.a,[]),i.zb(1073742336,r,r,[]),i.zb(1024,m.k,(function(){return[[{path:"",component:k}]]}),[])])}))}}]);